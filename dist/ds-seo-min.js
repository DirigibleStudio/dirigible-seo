jQuery(document).ready((function(t){var e=t("#ds-editor-seo-preview");if(e.length){s(e);var n=t("#ds-editor-seo-title").find("input"),i=t("#ds-editor-seo-description").find("textarea"),o=t("#ds-editor-seo-no-index").find("input");n.on("input",(function(){s(e)})),i.on("input",(function(){s(e)})),o.on("change",(function(){s(e)}))}function s(e){var n=t("#ds-editor-seo-title").find("input").val(),i=window.location.href,o=t("#ds-editor-seo-description").find("textarea").val(),s=function(t,e){var n=e;window.location.href.indexOf(t)>-1&&(n=function(){var t={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,n,i){t[n]=i}));return t}()[t]);return n}("post","-1"),a=t("#ds-editor-seo-no-index").find("input").is(":checked"),l={action:"dsGetPreviewSEO",page_id:s,seo_title:n,seo_description:o,editing_URL:i};t.post(ajaxurl,l,(function(t){var n=JSON.parse(t);let i=n.title.replace(/\\/g,""),o=n.permalink,s=n.excerpt.replace(/\\/g,"");e.html(`<div class="ds-seo-preview ${a?"no-index":""}">\n          <span class="title">${i}</span>\n          <span class="link">${o}</span>\n          <span class="description">${s}</span>\n        </div>`)}))}t("#ds-migrate-yoast").on("click",(function(){var e=t(this).parent(".tool");e.find(".button");e.find(".notification").remove();t.post(ajaxurl,{action:"ds_migrate_yoast"},(function(t){console.log(t),JSON.parse(t).forEach((function(t){e.append(t)}))}))})),t("#ds-save-llms-txt").on("click",(function(){var e=t(this),n=t("#llms-txt-status"),i=t("#llms-txt-content").val();e.prop("disabled",!0).text("Saving..."),n.html("");var o={action:"ds_save_llms_txt",content:i,nonce:ds_seo_ajax.nonce};t.post(ajaxurl,o,(function(t){var i=JSON.parse(t),o=i.success?"notice-success":"notice-error";n.html('<div style="margin-top: 8px;" class="notice '+o+'"><p>'+i.message+"</p></div>"),e.prop("disabled",!1).text("Save llms.txt")})).fail((function(){n.html('<div class="notice notice-error"><p>Error saving file. Please try again.</p></div>'),e.prop("disabled",!1).text("Save llms.txt")}))})),t("#ds-load-llms-txt").on("click",(function(){var e=t(this),n=t("#llms-txt-status"),i=t("#llms-txt-content");e.prop("disabled",!0).text("Loading..."),n.html("");var o={action:"ds_load_llms_txt",nonce:ds_seo_ajax.nonce};t.post(ajaxurl,o,(function(t){var o=JSON.parse(t);o.success?(i.val(o.content),n.html('<div class="notice notice-success"><p>Content reloaded from file.</p></div>')):n.html('<div class="notice notice-error"><p>Error loading file.</p></div>'),e.prop("disabled",!1).text("Reload from File")})).fail((function(){n.html('<div class="notice notice-error"><p>Error loading file. Please try again.</p></div>'),e.prop("disabled",!1).text("Reload from File")}))})),t("#ds-delete-llms-txt").on("click",(function(){var e=t(this),n=t("#llms-txt-status"),i=t("#llms-txt-content");if(confirm("Are you sure you want to delete the llms.txt file? This action cannot be undone.")){e.prop("disabled",!0).text("Deleting..."),n.html("");var o={action:"ds_delete_llms_txt",nonce:ds_seo_ajax.nonce};t.post(ajaxurl,o,(function(t){var o=JSON.parse(t),s=o.success?"notice-success":"notice-error";n.html('<div style="margin-top: 8px;" class="notice '+s+'"><p>'+o.message+"</p></div>"),o.success&&i.val(""),e.prop("disabled",!1).text("Delete llms.txt")})).fail((function(){n.html('<div class="notice notice-error"><p>Error deleting file. Please try again.</p></div>'),e.prop("disabled",!1).text("Delete llms.txt")}))}}))}));